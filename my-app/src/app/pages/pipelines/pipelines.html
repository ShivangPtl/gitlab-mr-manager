<div class="home-container">

  <!-- Table -->
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z2 full-width-table">
    <!-- Project Name -->
    <ng-container matColumnDef="project">
      <th mat-header-cell *matHeaderCellDef> Project </th>
      <td mat-cell *matCellDef="let pipeline">{{ pipeline.project_name }}</td>
    </ng-container>

    <!-- Pipeline Type -->
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef> Type </th>
      <td mat-cell *matCellDef="let pipeline">{{ pipeline.type }}</td>
    </ng-container>

    <!-- Triggered By -->
    <ng-container matColumnDef="user">
      <th mat-header-cell *matHeaderCellDef> Triggered By </th>
      <td mat-cell *matCellDef="let pipeline">{{ pipeline.user }}</td>
    </ng-container>

    <!-- Created At -->
    <ng-container matColumnDef="created">
      <th mat-header-cell *matHeaderCellDef> Created At </th>
      <td mat-cell *matCellDef="let pipeline">{{ pipeline.created_at }}</td>
    </ng-container>

    <!-- Pipeline Status -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let pipeline">
        <span [ngClass]="getStatusClass(pipeline.status)">
          {{ pipeline.status }}
        </span>
      </td>
    </ng-container>

    <!-- Info -->
    <ng-container matColumnDef="info">
      <th mat-header-cell *matHeaderCellDef> Info </th>
      <td mat-cell *matCellDef="let pipeline">
        <button mat-icon-button (click)="openDetails(pipeline.full_pipeline)">
          <mat-icon>info</mat-icon>
        </button>
      </td>
    </ng-container>

    <!-- URL -->
    <ng-container matColumnDef="link">
      <th mat-header-cell *matHeaderCellDef> Open </th>
      <td mat-cell *matCellDef="let row">
        <a (click)="openDefaultBrowser(row.link)" class="pointer">ğŸ”—</a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['project', 'type', 'user', 'created','status', 'info', 'link']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['project', 'type', 'user', 'created','status', 'info', 'link'];"></tr> 
  </table>

  <!-- Action Section -->
  <div class="actions">
    <!-- Left: Last Refreshed Info -->
    <div class="refresh-info">
      â±ï¸ Last refreshed: {{ lastRefreshed | date: 'dd/MM/yyyy hh:mm a' }}
    </div>

    <!-- Right: Buttons -->
    <div class="button-group">
      <button mat-raised-button class="themed-btn" (click)="refreshPipelines()">ğŸ”„ Refresh</button>
    </div>
  </div>

</div>
